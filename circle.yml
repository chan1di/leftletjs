dependencies:
  cache_directories:
    - "node_modules"
    - "~/.npm"
    - "~/.meteor"
  override:
    # Cache Meteor    
    - nvm install 8.9.4
    - nvm alias default 8.9.4
    - if [ -d ~/.meteor ]; then sudo ln -s ~/.meteor/meteor /usr/local/bin/meteor; fi
    - if [ ! -e $HOME/.meteor/meteor ]; then curl https://install.meteor.com | sh; fi
    - nvm ls
    - npm install -g chimp
    - node -v
    - npm -v
    - chimp -v
    # - npm install -g json-schema-traverse
    # - npm install -g fast-deep-equal
    # - npm install chimp
    # - npm install -g selenium-standalone
test:
  override:
    # - npm run dev:
    #     background: true
    # - sleep 360
    # - npm run chimp-test
# deployment:
#   staging:
#     branch: "dev"
#     commands:
#       - echo $DEPLOYMENT_TOKEN > deployment_token.json
#       - METEOR_SESSION_FILE=deployment_token.json DEPLOY_HOSTNAME=eu-west-1.galaxy-deploy.meteor.com meteor deploy www.YOUR_STAGING_APP.com --settings settings-development.json
# production:
#     branch: "master"
#     commands:
#       - echo $PROD_SETTINGS > settings-production.json
#       - echo $DEPLOYMENT_TOKEN > deployment_token.json
#       - METEOR_SESSION_FILE=deployment_token.json DEPLOY_HOSTNAME=eu-west-1.galaxy-deploy.meteor.com meteor deploy www.YOUR_PRODUCTION_APP.com --settings settings-production.json